{% macro numbercard(card_title, card_number) %}
<div class="card">
    <div class="card-content">
        <div class="content">
            <h1 class="has-text-centered">{{card_number}}</h1>
        </div>
    </div>
    <footer class="card-footer">
        <div class="container">
            <p class="has-text-centered">{{card_title}}</p>
        </div>
    </footer>
</div>

<script>
    class NumberCard {
        constructor($parent, card_title, card_number, onLoad = null) {
            this.$parent = $parent
            this.card_title = card_title
            this.card_number = card_number
            this.onLoad = onLoad
            this.isLoading = this.onLoad ? true : false

            this.mount(this.$parent)

            if (this.isLoading) {
                this.onLoad().then((number) => {
                    this.card_number = number
                    this.isLoading = false
                    this.mount(document.querySelector('.cell'))
                });
                this.isLoading = false
            }
        }

        render() {
            let $card = document.createElement('div')
            $card.classList.add('card')
            $card.innerHTML = `
                <div class="card-content">
                    <div class="content">
                        <h1 class="has-text-centered">${this.card_number}</h1>
                    </div>
                </div>
                <footer class="card-footer">
                    <div class="container">
                        <p class="has-text-centered">${this.card_title}</p>
                    </div>
                </footer>`

            if (this.isLoading) {
                let $content = $card.querySelector('.content')
                $content.innerHTML = '<h1 class="has-text-centered"><i class="fa-spinner fa-spin"></h1>'
            }

            return $card
        }

        mount(parent) {
            parent.innerHTML = this.render();
        }


    }
</script>
{% endmacro %}